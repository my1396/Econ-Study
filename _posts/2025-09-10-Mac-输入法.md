---
layout: post
title: Mac 中文输入法 – Rime
tag: life
update: 2025-09-10
---



## Rime 输入法

Mac 下名字叫「鼠须管」\
Windows 下名字叫「小狼毫」\
Linux 下名字叫「中州韵」

app 网站: <https://rime.im>

Q: Why Rime？\
A: 一款本地输入法（没有云端），可以高度自定义，实现众多功能，包括候选框的大小与皮肤，词库与短语等，通过修改本地配置文件，并最终把它打磨成一款完全符合你输入习惯的输入法。[且 Apple 自带输入法非常反中文…]

牛逼之处详见知乎 [超全超详细 Rime 中州韵输入法配置指南](https://zhuanlan.zhihu.com/p/471436833)

Q: 有没有什么缺点呢？\
A: VS Code Snippets 好像有点儿问题。可以说是用 bug 换取中文输入法的便捷。


--------------------------------------------------------------------------------

### 安装 app

1. 首先进入 [Rime](https://rime.im/download/) 的官网，直接下载安装鼠鬚管的安装包 `Squirrel.pkg` 并安装。安装完成后，系统会提示退出重新登录。

2. 然后进入 System Settings -> keyboard -> All Input Sources，点击左下角的 + 号，选择「Chinese, Simplified」，然后选择「鼠鬚管」或者 Squirrel - Simplified，点击「添加」。

3. 之后就可以在菜单栏的输入法图标中选择「鼠鬚管」作为当前输入法。

快速入门：<https://github.com/rime/home/wiki/UserGuide#打字入門>

--------------------------------------------------------------------------------

### 安裝配置器

`/plum/` (中文名: 东风破) 是 Rime 输入法下的配置管理工具。

Plum GitHub repo: <https://github.com/rime/plum>

In `/plum/` terms, a re-usable piece of configuration is known as a recipe (配方), denoted by the "℞" symbol.

初始化

```bash
curl -fsSL https://raw.githubusercontent.com/rime/plum/master/rime-install | bash
```

The one-liner runs the `rime-install` script to download preset packages and install source files to Rime user directory. (Yet it doesn't enable new schemas for you)

> 以上命令行，安装配置管理器及预设配方。

--------------------------------------------------------------------------------

### 安装词库

词库是输入法好用的灵魂。Rime 有丰富的词库资源供用户安装。

You can add packages from all the great Rime developers on GitHub by specifying a list of package names or refer to packages by `<user>/<repo>`:

- 注意以下命令行务必在 `plum` 目录下执行，否则会报错 `bash: rime-install: No such file or directory`。
  
  Syntax: `bash rime-install <package-names-or-repo-paths>`

- 如果不想在 plum 目录下执行，可以把 plum 目录添加到环境变量 PATH 中
  
  例如 `export PATH="$PATH:/Users/menghan/plum"`，然后就可以在任何目录下执行 `rime-install` 命令了。

- 若要更新 plum 本身，执行 `bash rime-install plum` 即可。

```bash
# 从 GitHub 安装配方
bash rime-install https://github.com/lotem/rime-forge/raw/master/lotem-packages.conf

# or in short form: "<user>/<repo>/<filepath>"
bash rime-install lotem/rime-forge/lotem-packages.conf

# or specify a branch: "<user>/<repo>@<branch>/<filepath>"
bash rime-install lotem/rime-forge@master/lotem-packages.conf
```

Q: What is a Rime input schema? \
A **Rime input schema** (**Rime 輸入方案**) defines the rules of a specific "input method".

It consists of 
  - a configuration file named `<schema_id>.schema.yaml`, and 
    - a customization file named `<schema_id>.custom.yaml` (用户自定义文件，可用于修改具体输入方案的默认配置)
    - 用户自定义文件名：将默认配置文件名中的 `schema` 替换为 `custom` 即可。`<schema_id>.custom.yaml` 优先级高于 `<schema_id>.schema.yaml`，可以覆盖默认配置。
  - usually an optional **Rime dictionary** (**韵书**) file named `<schema_id>.dict.yaml`.

`luna_pinyin_simp` 是一個单独的输入方案，有自己的配置文件，与 `luna_pinyin` 切换到简体模式有所不同。

- `luna_pinyin.schema.yaml`：朙月拼音输入方案 → 可选择简体或繁体
  - 若要修改其配置，可以创建 `luna_pinyin.custom.yaml` 文件，在其中添加配置项目。
  - 使用后发现与 luna_pinyin_simp 相比，更加智能。比如中西文的自动切换，会更容易切换正确。标点的全半角更符合个人习惯。

- `luna_pinyin_simp.schema.yaml`：朙月拼音・簡化字輸入方案

--------------------------------------------------------------------------------

### Rime 配置文件目录

[定制指南文档 Customization Guide (GitHub wiki)](https://github.com/rime/home/wiki/RimeWithSchemata#定製指南)

- 注意修改配置后需要<span class="env-green">重新部署</span>输入法。

  如果担心之后的配置出了问题找不到，可以每一步都重新部署一次，确保代码没有出现问题。

- 对 `.yaml` 文件直接修改可以生效，但是<span class="env-orange">弊端是如果 rime 升级了，可能会覆盖掉你的修改</span>。所以推荐使用 `*.custom.yaml` 文件来覆盖默认配置。
  
  Syntax: `patch: "一级设定项/二级设定项/三级设定项": 新的设定值`.
  E.g., 以下例子设定每页候选词个数为 4 (允许的范围是 1〜9)：

  在用户目录建立文档 `default.custom.yaml`，添加以下内容:

  ```yaml
  patch: "menu/page_size": 4
  ```
  反例:
  ```yaml
  Patch:
    menu:
      page_size: 4
  ```
  不要用这个，这样会把所有 style 内部的内容清空，只有一个 horizontal 配置。[↩︎](https://www.mintimate.cc/zh/guide/configurationOverride.html)

  然后重新部署输入法即可生效。

  - 若要添加新的设定项，可以在 `patch` 下添加新的行 `name: value`。
    - `name` 字段可以是多级的，用 `/` 分隔。
    - `name` 字段可选用用双引号括起来，如 `“name”: value`。
  - 对 `default.custom.yaml` 的修改会影响所有输入方案。
  - 如果只想影响某个输入方案，可以修改对应的 `<scheme-ID>.custom.yaml` 文件，例如 `luna_pinyin.custom.yaml`。

用户配置文件目录 `/Users/<user-name>/Library/Rime/`

配置文件

| 默认配置                  | 自定义配置                | 功能                        |
| ------------------------- | ------------------------- | --------------------------- |
| `default.yaml`            | `defalut.custom.yaml`     | 全局配置                    |
| `luna_pinyin.schema.yaml` | `luna_pinyin.custom.yaml` | 朙月拼音输入方案 (局部配置) |

Note:

1. 局部配置优先级高于全局配置。
2. `<scheme-ID>.custom.yaml` 优先级高于 `<scheme-ID>.shcema.yaml`。




**常用配置文件**

全局配置文件:

- `default.custom.yaml`：默认配置文件，自定义全局样式。
  
  设置候选词个数，默认输入法。
- `squirrel.custom.yaml`: 修改 rime 的常规设置，定制<span class="env-green">**外观**</span>。新建文件，输入你想要的配置项即可。
  
  [squirrel.yaml 配置指南](https://github.com/rime/squirrel/wiki/squirrel.yaml-配置指南#鼠鬚管介面定製指南)

针对具体输入方案 (schema) 的配置文件:

- `pinyin_simp.schema.yaml` 拼音・简化字主翻译器
- `luna_pinyin.schema.yaml` 朙月拼音用户短语

Q: 如何修改每页候选词个数？ \
A: rime 默认的是5个候选词。修改 `default.custom.yaml` 文件中的 `page_size` 字段，例如：
```yaml
patch:
    "menu/page_size": 4
```

### 主题外观

Rime 支持自定义皮肤主题，修改 `squirrel.custom.yaml` 文件中的 `style` 字段，例如：

An example configuration to customize the appearance of the Rime input method:

```yaml
patch:

  show_notifications_when: appropriate  # 状态通知，适当，也可设为全开（always）全关（never） 
  
  style:
    color_scheme: github #apathy  如何理解 
    
    horizontal: false  # 水平排列 
    inline_preedit: true #单行显示，false双行显示 
    candidate_format: "\u2005%c\u2005%@\u2005"  #1/6 em 空格 => U+2005

    label_font_face: "JetBrains Mono Medium" #"Skia"  
    label_font_point: 16   #候选编号大小

    font_face: Noto Sans Mono SC #候选字字体
    font_point: 21 #候选字词大小 

    ## 下面是关于输入法窗口外观的特殊设定
    corner_radius: 5  #候选条圆角
    border_height: 6      # 窗口边界高度，大于圆角半径才生效 
    border_width: 6     # 窗口边界宽度，大于圆角半径才生效   
    hilited_corner_radius: 3
    spacing: 2 # 候选词行距 横向 如何理解
    line_spacing: 6
    border_color_width: 5 
```

`color_scheme: github` 必须存在于 `preset_color_schemes` 之中

ref: 

- [Github theme](https://github.com/dearxs/Rime-Themes/tree/master/)
- [Catppuccin theme](https://github.com/catppuccin/squirrel/tree/main)

--------------------------------------------------------------------------------

### FAQ

Q: 输入法为什么显示繁体？ \
A: 用 ctrl + `` ` `` 或者 F4 切换输入方式。例如简体繁体的切换。

Q: 如何切换中英文？ \
A: 初始设置 Shift 键切换中英文。→ `Control+Shift+2`

Q: 如何使 <span class="env-green">Rime 只负责中文</span>，英文用系统自带的？ \
A: settings > keyboard > Input Sources，删除 Rime 以外的输入法。之后就只剩下【鼠须管】和 【ABC】输入法了。

--------------------------------------------------------------------------------

Q: 中英文反复横跳，如何设置英文用系统默认，rime 默认为中文？ \
A: 

1. 找到你想要设置的输入法配置文件，例如 `luna_pinyin.custom.yaml`，然后添加字段如下：
   
   ```yaml
   switches:
     - name: ascii_mode
       reset: 0
       states: [ 中文 ] # 只保留中文输入法，避免无意间切到英文输入状态
   ```
2. 全局配置文件 `default.custom.yaml` 中，添加如下字段
   
   ```yaml
   patch:
     ascii_composer/switch_key:
        # Shift_L: clear
        # Shift_R: clear
        Shift_L: noop
        Shift_R: noop
     key_binder/bindings:
        - { when: always, accept: Control+Shift+2, toggle: ascii_mode }
        - { when: always, accept: Control+g, send: Escape}
   ```

   - 这样设置后，Shift 键不再切换中英文状态，而是由 `Control + Shift + 2` 来切换中英文状态。
   - `accept`: 用户实际输入的键；`send`: 发送给 rime 的按键；`toggle`: 切换某个状态；`when`: 什么时候生效。
   - `when` 可以接受的值有
     
     ```markdown
     paging     翻页
     has_menu   操作候选项用
     composing  操作输入码用
     always     全域
     ```
   
   ref: <https://blog.einverne.info/post/2021/10/rime-shortcut.html>
3. 对于某些软件，如 Alfred, 只需要英文。应用场景为，当下输入法为 Rime 中文时，切换到 Alfred 之后自动变为英文输入。
   
   在全局配置文件 `squirrel.custom.yaml` 中添加字段如下：
   
   ```yaml
   patch: 
    # 以下程序中默认英文输入
    app_options:
        com.runningwithcrayons.Alfred:
            ascii_mode: true
   ```
   
**总结**

- 如此设置后，英文用系统自带 ABC，中文用 Rime。相当于取消 Rime 自动中英文切换的功能。(因为有时会误切，不太聪明的样子)
  而且当下是中文还是英文输入法状态，一目了然。Rime 状态栏不能显示中英文，每次都要在文档中动态显示，觉得一是很分心，二是中英文跳动太频繁，且自作聪明。

- 意外的效果是，现在可以直接 Space 键选词了，不需要按两次选第一候选词了。
  根据试验，这个是 `default.custom.yaml` 中的某个配置项起作用了 (具体哪个不详)。


[不使用 Squirrel 英文态，但是依然想用 Shift_L 来切换中英文状态](https://github.com/rime/squirrel/wiki/实现Shift_L-按下时切换输入法即Shift_L-代替Ctrl_Space-切换系统输入法)

--------------------------------------------------------------------------------

Q: 如何在特定程序里关闭中文输入？ \
A: 修改 `squirrel.custom.yaml` 文件中的 `ascii_mode` 字段，例如：

```yaml
patch:
    app_options/<app-identifier>:
        ascii_mode: true
```

自定义 Mac 应用程序的初始转换状态，首先查看应用的 `Info.plist` 文件，得到该应用的 `Bundle Identifier`，通常是形如 `com.apple.Xcode` 的字符串。

1. 找到目标 app, 右键选择 Show Package Contents
2. 进入 Contents 目录，打开 Info.plist 文件
3. 搜索 (cmd + F) 找到 `CFBundleIdentifier` 字段，复制其值

ref: [在特定应用中默认英文输入](https://github.com/rime/home/wiki/CustomizationGuide#在特定程序裏關閉中文輸入)


--------------------------------------------------------------------------------

Q: 如何让括号使用半角符号？ \
A: 修改 `luna_pinyin.custom.yaml` 文件中的 `punctuator` 字段，例如：

```yaml
patch:
  punctuator/full_shape: # 半角标点
    "(" : （
    ")" : ）
  punctuator/half_shape: # 半角标点
    "(" : "("
    ")" : ")"
```

ref:

- [定制标点符号](https://github.com/rime/home/wiki/CustomizationGuide#一例定製標點符號)
- [使用全套西文标点](https://gist.github.com/lotem/2334409)

--------------------------------------------------------------------------------


Q: 选词需要按两次空格键，如何改为按一次？ \
A: 修改 `default.custom.yaml` 文件中的 `commit_selection_key` 字段，例如：

```yaml
patch:
    "key_binder/bindings":
    - { when: composing, accept: "space", send: "CommitSelection" }
```

--------------------------------------------------------------------------------

Q: Cannot find `rime-install`，错误如下

```bash
bash rime-install plum
bash: rime-install: No such file or directory
```
A: rime-install 不在当前目录，cd 到 plum 目录下再执行。

```bash
cd /Users/menghan/plum
bash rime-install plum
```

或者添加环境变量

```bash
export PATH="$PATH:/Users/menghan/plum/rime-install"
```

--------------------------------------------------------------------------------

Q: iPhone 下有没有办法使用 Rime？ \
A: iOS 下有个 app 叫 [仓输入法](https://apps.apple.com/cn/app/仓输入法/id6446617683?ign-itscg=30200&ign-itsct=apps_box_badge) [↩︎](https://www.igeekbb.com/2023/04/29/RIME/#iPhone-拼音方案)

「仓输入法」是基于 Rime 的 iOS 输入法。

- 用法见[使用指南](https://ihsiao.com/apps/hamster/docs/)。
- GitHub repo: <https://github.com/imfuxiao/Hamster>

--------------------------------------------------------------------------------

Miscellaneous

- 既版本 1.0.1 后，不再支持 `style/horizontal` 和 `style/vertical` (原本用于设置候选词框的排列方式，在 `~/Rime/squirrel.custom.yaml`中配置)

--------------------------------------------------------------------------------

Tutorial

- <https://blog.bdim.moe/zh/posts/configuring-rime-input-method-on-macos/>
- 雾凇拼音 <https://b23.tv/rQD1woH>
- 博客园 <https://www.cnblogs.com/vimmer/articles/3003051.html>
- [个人输入法调教之 Rime](https://uicop.com/post/93)

--------------------------------------------------------------------------------

<span class="env-orange" style="text-decoration: line-through;">**微信输入法**</span>

非常智障 下载两次 使用后卸载 有严重 bug 无法选词 避雷！

卸载

1. Go to `/Library/Input Methods`
2. Delete `WeType.app`

如果提示 "文件正在使用中，无法删除": Open Activity Monitor, find the process named `WeType`, select it and click the "X" button in the top left corner to quit it. Then try deleting the app again.